!function(a){"use strict";a(document).on("click",".wopb-compare-btn, .wopb-compare-product-list-modal .wopb-add-to-compare-btn, .wopb-compare-remove, .wopb-compare-clear-btn, .wopb-compare-nav-item, .wopb-lets-compare-btn, .wopb-menu-compare-btn",(function(e){e.preventDefault();const d=a(this),p=a(".wopb-modal-wrap:first"),c=p.hasClass("wopb-quick-view-wrapper"),n=p.find(".wopb-modal-content"),r=p.find(".wopb-modal-loading"),s=d.parents(".wopb-product-list-body:first"),i=d.parents(".wopb-compare-wrapper:first");c||(p.attr("data-open-animation",d.data("open-animation")),p.attr("data-close-animation",d.data("close-animation")),p.attr("data-modal-class",d.data("modal_wrapper_class")),a(".wopb-no-product").addClass("wopb-d-none"),"redirect"===d.data("action")&&d.data("redirect")?window.location.href=d.data("redirect"):"redirect"!==d.data("added-action")&&("add"===d.data("action")||"nav_popup"===d.data("action")||"menu_block"===d.data("action")?("product_list"!==d.data("added-action")&&(p.removeClass("active"),p.removeClass(p.attr("data-close-animation")),p.removeClass(a(".wopb-compare-btn").data("modal_wrapper_class")),n.html(""),d.data("added-action")&&"message"!==d.data("added-action")&&!d.data("redirect")&&(p.removeClass(p.attr("data-open-animation")),r.find("."+d.data("modal-loader")).removeClass("wopb-d-none")),p.addClass(d.data("open-animation")),p.addClass("active"),r.addClass("active")),o(s)):("remove"===d.data("action")||"clear"===d.data("action"))&&o(i),p.addClass(d.data("modal_wrapper_class")))),a.ajax({url:wopb_compare.ajax,type:"POST",data:{action:"wopb_compare",postid:d.data("postid")??"",type:d.data("action"),added_action:d.data("added-action"),wpnonce:wopb_compare.security},success:function(o){if(c)a('.wopb-compare-btn[data-postid="'+d.data("postid")+'"]').addClass("wopb-compare-active");else{let t=o.data.html;d.data("redirect")&&(window.location.href=d.data("redirect")),"add"===d.data("action")&&t&&(d.data("added-action")&&"message"===d.data("added-action")&&setTimeout((function(){p.removeClass("wopb-modal-toast-wrapper active")}),5e3),d.parents(".wopb-compare-product-list-modal:first").length&&a(".wopb-compare-item-"+d.data("postid")).length&&a(".wopb-compare-product-list-modal:first").find(".wopb-compare-item-"+d.data("postid")).remove(),d.addClass("wopb-compare-active")),"remove"===d.data("action")?o.data.compare_count>o.data.demo_column?(a(".wopb-compare-item-"+d.data("postid")).remove(),a('.wopb-compare-btn[data-postid="'+d.data("postid")+'"]').removeClass("wopb-compare-active")):i.replaceWith(t):"clear"===d.data("action")?i.replaceWith(t):"product_list"===d.data("added-action")&&"add"==d.data("action")?(i.replaceWith(t),a(".wopb-compare-product-list-modal").removeClass("wopb-d-none")):n.html(t),a(".wopb-compare-nav-item").find(".wopb-compare-count").html(o.data.compare_count),a(".wopb-menu-compare-count").html(o.data.compare_count)}},complete:function(){c||("add"===d.data("action")||"nav_popup"===d.data("action")||"menu_block"===d.data("action")?(r.removeClass("active"),r.find("."+d.data("modal-loader")).addClass("wopb-d-none"),t(s)):"clear"===d.data("action")&&a(".wopb-compare-btn").removeClass("wopb-compare-active"),t(i))},error:function(a){console.log("Error occured.please try again"+a.statusText+a.responseText)}})})),a(document).on("click",".wopb-compare-add-btn",(function(o){a(".wopb-compare-product-list-modal").removeClass("wopb-d-none")})),a(document).on("input",".wopb-compare-product-list-modal .wopb-search-input",(function(e){const d=a(this);(d.val()&&d.val().length>=3||!d.val())&&function(e){o(e.parents(".wopb-product-list-body:first").find(".wopb-product-list")),a.ajax({url:wopb_compare.ajax_product_list,type:"POST",data:{action:"wopb_product_list",search:e.val()??"",wpnonce:wopb_compare.security},success:function(a){e.parents(".wopb-compare-product-list-modal:first").find(".wopb-product-list").html(a.data.html)},complete:function(){t(e.parents(".wopb-product-list-body:first").find(".wopb-product-list"))}})}(d)})),a(document).on("click",".wopb-compare-product-list-modal, .wopb-compare-product-list-modal .wopb-product-list-close",(function(o){(a(o.target).hasClass("wopb-compare-product-list-modal")||a(o.target).hasClass("wopb-product-list-close")||a(o.target).parents(".wopb-product-list-close:first").length)&&!a(".wopb-compare-product-list-modal").hasClass("wopb-d-none")&&a(".wopb-compare-product-list-modal").addClass("wopb-d-none")})),a(document).on("input",".wopb-qty-wrap .wopb-qty",(function(o){(""===a(this).val()||a(this).val()<1)&&a(this).val(1)})),a(document).on("click",".wopb-add-to-cart.ajax_add_to_cart",(function(o){const t=a(this);t.parent(".wopb-cart-action").hasClass("wopb-active")||o.preventDefault();let e=t.parents(".wopb-compare-table:first").find(".wopb-compare-item-"+t.data("postid")+" .wopb-qty-wrap .wopb-qty").val();a.ajax({url:wopb_compare.ajax,type:"POST",data:{action:"wopb_addcart",postid:t.data("postid"),quantity:e||1,wpnonce:wopb_compare.security},beforeSend:function(){t.addClass("loading")},success:function(a){t.parent(".wopb-cart-action").addClass("wopb-active")},complete:function(){t.removeClass("loading")},error:function(a){console.log("Error occured.please try again"+a.statusText+a.responseText)}})}));let o=function(a){e(a)||(a.addClass("wopb-processing"),a.append('<div class="wopb-block-overlay"></div>'))},t=function(a){a.removeClass("wopb-processing").unblock()},e=function(a){return a.is(".wopb-processing")||a.parents(".wopb-processing").length}}(jQuery);
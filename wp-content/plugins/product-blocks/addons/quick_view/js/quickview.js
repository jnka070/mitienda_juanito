!function(t){"use strict";t(document).on("click",".wopb-quickview-btn, .wopb-quick-view-navigation .wopb-nav-arrow",(function(e){let a=t(this);e.preventDefault();const o=t(".wopb-modal-wrap:first"),i=o.find(".wopb-modal-content"),n=o.find(".wopb-modal-loading"),r=o.find(".wopb-after-modal-content");let s=o.find("form.cart");r.html(),o.removeClass("active"),o.removeClass(o.attr("data-close-animation")),o.attr("data-open-animation",a.data("open-animation")),o.attr("data-close-animation",a.data("close-animation")),o.attr("data-modal-class",a.data("modal_wrapper_class")),o.removeClass(a.data("modal_wrapper_class")),s.removeAttr("data-redirect"),s.removeAttr("data-cart_type"),a.data("postid")&&t.ajax({url:wopb_core.ajax_quick_view,type:"POST",data:{action:"wopb_quickview",postid:a.data("postid"),postList:a.data("list"),wpnonce:wopb_quickview.security},beforeSend:function(){i.html(""),o.removeClass(a.data("close-animation")),o.addClass(a.data("open-animation")),o.addClass("active"),n.find("."+a.data("modal-loader")).removeClass("wopb-d-none"),o.addClass(a.data("modal_wrapper_class")),n.addClass("active")},success:function(t){i.html(t),r.html(""),r.append(i.find(".wopb-quick-view-navigation").removeClass("wopb-d-none"),i.find(".wopb-quick-view-zoom.wopb-zoom-2")),setTimeout((function(){a.quickViewElement(o,i,r)}),100)},complete:function(){n.removeClass("active"),n.find("."+a.data("modal-loader")).addClass("wopb-d-none")},error:function(t){console.log("Error occured.please try again"+t.statusText+t.responseText)}})})),t.fn.quickViewElement=function(e,a,o){e.find(".ct-increase").remove(),e.find(".ct-decrease").remove();let i=t(".wopb-quick-view-image .wopb-quick-slider-nav");const n="left"==i.data("position")||"right"==i.data("position");i.slick({slidesToShow:Number(i.data("collg")),vertical:n,asNavFor:".wopb-quick-slider",focusOnSelect:!0,dots:!1,pauseOnHover:!0,verticalSwiping:!0,infinite:!1,responsive:[{breakpoint:992,settings:{vertical:n,slidesToShow:Number(i.data("colsm"))}},{breakpoint:768,settings:{vertical:n,slidesToShow:Number(i.data("colxs"))}}],arrows:1==i.data("arrow"),prevArrow:'<div class="wopb-slick-prev-nav"><svg viewBox="0 0 492 287" xmlns="http://www.w3.org/2000/svg"><path transform="translate(0 -.96)" d="m485.97 252.68-224.38-245.85c-4.2857-4.3102-9.9871-6.1367-15.585-5.8494-5.6186-0.28724-11.3 1.5392-15.586 5.8494l-224.4 245.85c-8.0384 8.0653-8.0384 21.159 0 29.225s21.081 8.0653 29.12 0l210.86-231.05 210.84 231.05c8.0384 8.0653 21.08 8.0653 29.119 0 8.0384-8.0645 8.0384-21.159 0-29.225z"/></svg></div>',nextArrow:'<div class="wopb-slick-next-nav"><svg viewBox="0 0 492 287" xmlns="http://www.w3.org/2000/svg"><path transform="translate(0 -.96)" d="m485.97 252.68-224.38-245.85c-4.2857-4.3102-9.9871-6.1367-15.585-5.8494-5.6186-0.28724-11.3 1.5392-15.586 5.8494l-224.4 245.85c-8.0384 8.0653-8.0384 21.159 0 29.225s21.081 8.0653 29.12 0l210.86-231.05 210.84 231.05c8.0384 8.0653 21.08 8.0653 29.119 0 8.0384-8.0645 8.0384-21.159 0-29.225z"/></svg></div>',rtl:!(!t("html").attr("dir")||"rtl"!=t("html").attr("dir"))}).on("beforeChange",(function(t,e,a,o){let n=e.slideCount;i.find(".wopb-slick-next-nav").show(),i.find(".wopb-slick-prev-nav").show(),o===n-1?i.find(".wopb-slick-next-nav").hide():0===o&&i.find(".wopb-slick-prev-nav").hide()})),i.find(".wopb-slick-prev-nav").hide();let r=t(".wopb-quick-view-image .wopb-quick-slider");r.slick({slidesToShow:1,slidesToScroll:1,fade:!0,dots:!!r.data("dots"),infinite:!1,asNavFor:r.parents(".wopb-quick-view-image:first").find(".wopb-quick-slider-nav").length?".wopb-quick-slider-nav":"",arrows:1==r.data("arrow"),prevArrow:'<div class="wopb-slick-prev-large"><svg enable-background="new 0 0 477.175 477.175" version="1.1" viewBox="0 0 477.18 477.18"><path d="m145.19 238.58 215.5-215.5c5.3-5.3 5.3-13.8 0-19.1s-13.8-5.3-19.1 0l-225.1 225.1c-5.3 5.3-5.3 13.8 0 19.1l225.1 225c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.3-5.3 5.3-13.8 0-19.1l-215.4-215.5z"></path></svg></div>',nextArrow:'<div class="wopb-slick-next-large"><svg enable-background="new 0 0 477.175 477.175" version="1.1" viewBox="0 0 477.18 477.18"><path d="m360.73 229.08-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8 0.1-19z"/></svg></div>',rtl:!(!t("html").attr("dir")||"rtl"!=t("html").attr("dir"))}).on("beforeChange",(function(t,e,a,o){let i=e.slideCount;r.find(".wopb-slick-next-large").show(),r.find(".wopb-slick-prev-large").show(),o===i-1?r.find(".wopb-slick-next-large").hide():0===o&&r.find(".wopb-slick-prev-large").hide()})),r.find(".wopb-slick-prev-large").hide();const s=e.find(".variations_form");e.find(".woocommerce-product-gallery").each((function(){jQuery(this).trigger("wc-product-gallery-before-init",[this,wc_single_product_params]),jQuery(this).wc_product_gallery(wc_single_product_params),jQuery(this).trigger("wc-product-gallery-after-init",[this,wc_single_product_params]),jQuery(this).wc_product_gallery()}));let c=t(".wopb-quick-view-wrapper"),d=c.find(".wopb-quick-slider"),l={product:a,form:s,galleryWrapper:d,nav:c.find(".wopb-quick-slider-nav"),defaultNav:c.find(".wopb-quick-slider-nav .slick-current"),defaultProductImage:d.find(".slick-active img:first"),getImage:d.find(".slick-active img"),navItem:".slick-active",source:"singleProduct"};s.wc_variation_form(),c.variationChange(l),"true"==wopb_quickview.isVariationSwitchActive&&s.wopVariationSwitch(l);const p=t(".wopb-quick-view-image"),w=p.find(".wopb-main-image"),m=p.find(".wopb-zoom-image-outer"),u=p.find(".wopb-zoom-image-inner");w.on("mousemove",(function(e){u.find("img").attr("src",t(this).attr("src")),m.css("display","block");let{width:a,height:o}=this.getBoundingClientRect(),i=e.offsetX/a*100,n=e.offsetY/o*100;i>74&&(i=74),n>74&&(n=74),u.css("transform",`translate(-${i}%, -${n}%)`)})),w.on("mouseleave",(function(){m.css("display","none")})),t(document).on("click",".wopb-quick-view-image .wopb-main-image",(function(e){const a=o.find(".wopb-quick-view-zoom.wopb-zoom-2");a.find("img").attr("src",t(this).attr("src")),a.removeClass("wopb-d-none")})),t(document).on("click",".wopb-quick-view-zoom .wopb-zoom-close",(function(t){o.find(".wopb-quick-view-zoom.wopb-zoom-2").addClass("wopb-d-none")})),t(document).on("submit",".wopb-quick-view-content form",(function(a){a.preventDefault();let o=t(this);if(o.parents(".wopb-external-product:first").length)return void window.open(o.attr("action"));let i=e.find(".wopb-modal-body"),n=i.find(".variations_form .variations select[data-attribute_name]"),r={};n.each((function(){let t=o.data("attribute_name");r[t]=o.val()})),t.ajax({url:wopb_core.ajax,type:"POST",data:{action:"wopb_addcart",postid:i.data("product_id"),variationId:i.find("input[name=variation_id]").val(),quantity:i.find(".qty").val(),variation:r,cartType:o.data("cart_type")??"",wpnonce:wopb_core.security},beforeSend:function(){"buy_now"===o.data("cart_type")?i.find(".wopb-quickview-buy-btn.single_add_to_cart_button").addClass("loading"):i.find(".single_add_to_cart_button:not(.wopb-quickview-buy-btn)").addClass("loading")},success:function(e){"buy_now"===o.data("cart_type")&&o.data("redirect")?window.location.href=o.data("redirect"):e.message&&(i.find(".woocommerce-message").removeClass("wopb-d-none"),i.find(".woocommerce-message").html(e.message),t(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,o]),t(document.body).trigger("update_checkout"),i.animate({scrollTop:i.find(".woocommerce-message").offset().top-i.offset().top+i.scrollTop()},300))},complete:function(){i.find(".single_add_to_cart_button").removeClass("loading"),"yes"===i.data("modal_close_after_cart")&&"buy_now"!==o.data("cart_type")&&e.find(".wopb-modal-close").trigger("click")},error:function(t){console.log("Error occured.please try again"+t.statusText+t.responseText)}})}))},t(document).on("click",".wopb-quickview-buy-btn:not(.disabled)",(function(e){let a=t(this),o=a.parents(".wopb-quick-view-content:first").find("form.cart:first");o.attr("data-redirect",a.data("redirect")),o.attr("data-cart_type",a.data("cart_type")),o.trigger("submit")}))}(jQuery);